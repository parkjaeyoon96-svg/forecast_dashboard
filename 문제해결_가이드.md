# 🔧 대시보드 문제 해결 가이드

## ❌ 문제: 대시보드 열기 버튼을 눌러도 데이터가 안나와요

---

## ✅ 해결 방법

### 방법 1: 서버 재시작 (가장 흔한 해결책)

```powershell
# 1. 모든 Node 프로세스 종료
taskkill /F /IM node.exe

# 2. 프로젝트 폴더로 이동
cd "C:\Users\AD0283\Desktop\AIproject\Project_Forcast"

# 3. 개발 서버 시작
npm run dev
```

**서버 시작 확인:**
- 터미널에 다음 메시지가 나타나야 함:
  ```
  ▲ Next.js 16.0.1
  - Local:        http://localhost:3000
  ```

**브라우저에서 접속:**
1. http://localhost:3000 (메인 페이지)
2. http://localhost:3000/dashboard (대시보드)

---

### 방법 2: 캐시 삭제 후 재시작

```powershell
# 1. Node 프로세스 종료
taskkill /F /IM node.exe

# 2. .next 폴더 삭제 (빌드 캐시)
Remove-Item -Recurse -Force .next

# 3. 개발 서버 재시작
npm run dev
```

---

### 방법 3: 브라우저 강제 새로고침

서버는 실행 중인데 데이터가 안 보이는 경우:

1. **Ctrl + Shift + R** (Chrome/Edge)
2. **Ctrl + F5** (Firefox)
3. 또는 개발자 도구(F12) → 새로고침 버튼 우클릭 → "캐시 비우기 및 강력 새로고침"

---

### 방법 4: 포트 충돌 확인

다른 프로그램이 3000 포트를 사용 중일 수 있습니다.

```powershell
# 포트 3000을 사용하는 프로세스 확인
netstat -ano | findstr :3000

# 해당 프로세스 종료 (PID 확인 후)
taskkill /F /PID [프로세스ID]
```

---

## 🔍 문제 진단 체크리스트

### 1️⃣ 서버가 실행 중인지 확인

```powershell
# Node 프로세스 확인
Get-Process -Name node -ErrorAction SilentlyContinue
```

**기대 결과:**
- 1-2개의 node.exe 프로세스가 실행 중이어야 함
- 10개 이상이면 충돌 → 모두 종료 후 재시작

### 2️⃣ 서버 응답 확인

브라우저나 PowerShell로 확인:

**PowerShell:**
```powershell
Invoke-WebRequest -Uri "http://localhost:3000" -UseBasicParsing
```

**브라우저:**
```
http://localhost:3000
```

**기대 결과:**
- 상태 코드: 200
- "월중 손익예측 시스템" 페이지가 표시됨

### 3️⃣ API 엔드포인트 확인

```
http://localhost:3000/api/data
```

**기대 결과:**
- JSON 데이터가 표시됨
- `"success": true`

### 4️⃣ 대시보드 접속

```
http://localhost:3000/dashboard
```

**기대 결과:**
- 로딩 화면 → 대시보드 표시
- KPI 카드, 차트들이 보임

---

## 🐛 흔한 오류와 해결책

### 오류 1: "Cannot GET /dashboard"

**원인:** 서버가 실행 중이 아님

**해결:**
```powershell
npm run dev
```

### 오류 2: "Loading..." 에서 멈춤

**원인:** API 응답 오류

**해결:**
1. F12 (개발자 도구) → Console 탭에서 오류 확인
2. Network 탭에서 `/api/load-data` 요청 확인
3. 서버 터미널에서 오류 로그 확인

### 오류 3: "데이터 소스: 기본 샘플 데이터"

**원인:** CSV 파일을 찾을 수 없음 (정상 동작)

**해결:**
- 샘플 데이터로 작동하므로 문제 없음
- 실제 데이터 사용하려면:
  ```powershell
  copy raw\sap_ke30_sample.csv raw\sap_ke30.csv
  ```
- 대시보드에서 🔄 새로고침 클릭

### 오류 4: 차트가 안 보임

**원인:** JavaScript 오류 또는 Chart.js 로딩 실패

**해결:**
1. F12 → Console에서 오류 확인
2. 패키지 재설치:
   ```powershell
   npm install
   ```
3. 서버 재시작

### 오류 5: "Module not found" 오류

**원인:** 패키지가 설치되지 않음

**해결:**
```powershell
npm install
```

---

## 🎯 단계별 완전 재설정

모든 방법이 실패하면 완전 재설정:

```powershell
# 1. 모든 Node 프로세스 종료
taskkill /F /IM node.exe

# 2. node_modules 삭제
Remove-Item -Recurse -Force node_modules

# 3. .next 삭제
Remove-Item -Recurse -Force .next

# 4. 패키지 재설치
npm install

# 5. 개발 서버 시작
npm run dev
```

**예상 시간:** 2-3분

---

## 🔍 상세 디버깅

### 터미널 로그 확인

서버 실행 중 터미널에서 확인:

```
✅ 정상:
▲ Next.js 16.0.1
- Local:        http://localhost:3000
- Environments: .env
Ready in 3.2s

❌ 오류:
Error: Cannot find module ...
```

### 브라우저 콘솔 확인 (F12)

**Console 탭:**
```javascript
// API 테스트
fetch('/api/data')
  .then(r => r.json())
  .then(console.log);

// 로드 데이터 테스트
fetch('/api/load-data')
  .then(r => r.json())
  .then(console.log);
```

**Network 탭:**
- `/api/data` 요청 확인
- `/api/load-data` 요청 확인
- 상태 코드 200인지 확인

---

## 💡 예방 조치

### 서버 시작 전 체크리스트

- [ ] 이전 Node 프로세스 종료됨
- [ ] 올바른 폴더에 있음 (`Project_Forcast`)
- [ ] `package.json` 파일이 있음
- [ ] `node_modules` 폴더가 있음 (없으면 `npm install`)
- [ ] 포트 3000이 사용 가능함

### 개발 중 권장사항

1. **한 번에 하나의 터미널만 사용**
   - 서버는 하나만 실행
   
2. **서버 종료는 Ctrl+C**
   - taskkill은 비상시에만 사용
   
3. **코드 변경 후 자동 새로고침**
   - Next.js는 Hot Module Replacement 지원
   - 파일 저장하면 자동 반영
   
4. **큰 변경 후 서버 재시작**
   - 새 패키지 설치 후
   - 설정 파일 변경 후
   - API 라우트 추가 후

---

## 🎓 유용한 명령어

```powershell
# 서버 상태 확인
Get-Process -Name node

# 포트 확인
netstat -ano | findstr :3000

# 패키지 버전 확인
npm list

# 로그 파일로 저장
npm run dev > server.log 2>&1

# 특정 포트로 실행
$env:PORT=3001; npm run dev
```

---

## 📞 여전히 해결 안되면?

### 1. 터미널 오류 메시지 확인
- 정확한 오류 메시지 복사

### 2. 브라우저 Console 오류 확인 (F12)
- JavaScript 오류 확인

### 3. 다음 정보 수집
- Node.js 버전: `node --version`
- npm 버전: `npm --version`
- 운영체제: Windows 버전
- 오류 메시지 전문

### 4. 기본 샘플로 테스트
```powershell
# 샘플 데이터로 테스트
copy raw\sap_ke30_sample.csv raw\sap_ke30.csv
npm run dev
```

http://localhost:3000/dashboard 접속

---

## ✅ 정상 동작 확인

모든 것이 정상이면:

1. ✅ 터미널: "Ready in X.Xs" 메시지
2. ✅ 브라우저: http://localhost:3000 접속됨
3. ✅ 메인 페이지: "월중 손익예측 시스템" 표시
4. ✅ 대시보드: 차트와 KPI 카드 표시
5. ✅ 데이터 소스: "sap" 또는 "기본 샘플 데이터" 표시
6. ✅ 🔄 새로고침 버튼 작동

---

**작성일:** 2024-11-14  
**버전:** 1.0.0  
**대상:** Windows 10/11, Node.js 18+, Next.js 16





