# ğŸ“ ë°ì´í„° í´ë” êµ¬ì¡° ê¶Œì¥ì‚¬í•­

## ğŸ¯ ë°ì´í„° íŠ¹ì„± ë¶„ì„

### ë°ì´í„° ì—…ë°ì´íŠ¸ ì£¼ê¸°
- **ë‹¹ë…„ ë°ì´í„°**: ì£¼ì°¨ë³„ë¡œ ìƒˆë¡œìš´ íŒŒì¼ ìƒì„± (ë§¤ì£¼ ì›”ìš”ì¼)
- **ì „ë…„ ë°ì´í„°**: í•œ ë‹¬ ë™ì•ˆ ë™ì¼ (ì›”ë³„ ì—…ë°ì´íŠ¸)
- **ê³„íš ë°ì´í„°**: í•œ ë‹¬ ë™ì•ˆ ë™ì¼ (ì›”ë³„ ì—…ë°ì´íŠ¸)

---

## âœ… ê¶Œì¥ í´ë” êµ¬ì¡°: **í•˜ì´ë¸Œë¦¬ë“œ ì ‘ê·¼**

```
raw/
â”œâ”€â”€ YYYYMMDD/                          # ë‹¹ë…„ ë°ì´í„° (ì£¼ì°¨ë³„ í´ë”)
â”‚   â”œâ”€â”€ ke30_YYYYMMDD_YYYYMM.csv
â”‚   â””â”€â”€ ke30_YYYYMMDD_YYYYMM_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â”œâ”€â”€ previous/                          # ì „ë…„ ë°ì´í„° (ì›”ë³„)
â”‚   â””â”€â”€ YYYYMM/                        # ì˜ˆ: 202411 (2024ë…„ 11ì›”)
â”‚       â”œâ”€â”€ ke30_prev_YYYYMM_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚       â””â”€â”€ ke30_prev_YYYYMM.csv
â”‚
â””â”€â”€ plan/                              # ê³„íš ë°ì´í„° (ì›”ë³„)
    â””â”€â”€ YYYYMM/                        # ì˜ˆ: 202511 (2025ë…„ 11ì›”)
        â””â”€â”€ plan_YYYYMM_ì „ì²˜ë¦¬ì™„ë£Œ.csv
```

### ì˜ˆì‹œ êµ¬ì¡°
```
raw/
â”œâ”€â”€ 20251117/                          # 2025-11-17 ì£¼ì°¨ ë°ì´í„°
â”‚   â”œâ”€â”€ ke30_20251117_202511.csv
â”‚   â””â”€â”€ ke30_20251117_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â”œâ”€â”€ 20251124/                          # 2025-11-24 ì£¼ì°¨ ë°ì´í„°
â”‚   â”œâ”€â”€ ke30_20251124_202511.csv
â”‚   â””â”€â”€ ke30_20251124_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â”œâ”€â”€ previous/
â”‚   â””â”€â”€ 202411/                        # 2024ë…„ 11ì›” ì „ë…„ ë°ì´í„°
â”‚       â”œâ”€â”€ ke30_prev_202411_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚       â””â”€â”€ ke30_prev_202411.csv
â”‚
â””â”€â”€ plan/
    â””â”€â”€ 202511/                        # 2025ë…„ 11ì›” ê³„íš ë°ì´í„°
        â””â”€â”€ plan_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
```

---

## ğŸ”„ ëŒ€ì•ˆ 1: ì›”ë³„ í´ë” í†µí•© êµ¬ì¡°

```
raw/
â””â”€â”€ YYYYMM/                            # ì˜ˆ: 202511 (2025ë…„ 11ì›”)
    â”œâ”€â”€ current/                       # ë‹¹ë…„ ì£¼ì°¨ë³„ ë°ì´í„°
    â”‚   â”œâ”€â”€ 20251117/
    â”‚   â”‚   â”œâ”€â”€ ke30_20251117_202511.csv
    â”‚   â”‚   â””â”€â”€ ke30_20251117_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
    â”‚   â””â”€â”€ 20251124/
    â”‚       â”œâ”€â”€ ke30_20251124_202511.csv
    â”‚       â””â”€â”€ ke30_20251124_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
    â”‚
    â”œâ”€â”€ previous/                      # ì „ë…„ ë°ì´í„° (ì›”ë³„ 1ê°œ)
    â”‚   â””â”€â”€ ke30_prev_202411_ì „ì²˜ë¦¬ì™„ë£Œ.csv
    â”‚
    â””â”€â”€ plan/                          # ê³„íš ë°ì´í„° (ì›”ë³„ 1ê°œ)
        â””â”€â”€ plan_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
```

**ì¥ì :**
- ì›”ë³„ë¡œ ëª¨ë“  ë°ì´í„°ê°€ í•œ ê³³ì— ëª¨ì„
- ì›”ì´ ë°”ë€” ë•Œ í´ë” ì •ë¦¬ ìš©ì´

**ë‹¨ì :**
- í´ë” êµ¬ì¡°ê°€ ë³µì¡í•¨
- ë‹¹ë…„ ë°ì´í„° ì ‘ê·¼ ê²½ë¡œê°€ ê¸¸ì–´ì§

---

## ğŸ”„ ëŒ€ì•ˆ 2: íƒ€ì…ë³„ ë¶„ë¦¬ êµ¬ì¡°

```
raw/
â”œâ”€â”€ current/                           # ë‹¹ë…„ ë°ì´í„°
â”‚   â””â”€â”€ YYYYMMDD/
â”‚       â”œâ”€â”€ ke30_YYYYMMDD_YYYYMM.csv
â”‚       â””â”€â”€ ke30_YYYYMMDD_YYYYMM_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â”œâ”€â”€ previous/                          # ì „ë…„ ë°ì´í„°
â”‚   â””â”€â”€ YYYYMM/
â”‚       â””â”€â”€ ke30_prev_YYYYMM_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â””â”€â”€ plan/                              # ê³„íš ë°ì´í„°
    â””â”€â”€ YYYYMM/
        â””â”€â”€ plan_YYYYMM_ì „ì²˜ë¦¬ì™„ë£Œ.csv
```

**ì¥ì :**
- ë°ì´í„° íƒ€ì…ë³„ë¡œ ëª…í™•íˆ ë¶„ë¦¬
- ê° íƒ€ì…ë³„ ê´€ë¦¬ ìš©ì´

**ë‹¨ì :**
- ë‹¹ë…„ ë°ì´í„° ê²½ë¡œê°€ ë³€ê²½ë¨ (ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • í•„ìš”)

---

## âœ… ìµœì¢… ê¶Œì¥: **í•˜ì´ë¸Œë¦¬ë“œ êµ¬ì¡° (1ë²ˆ)**

### ì´ìœ :
1. âœ… **ë‹¹ë…„ ë°ì´í„°**: ì£¼ì°¨ë³„ë¡œ ìì£¼ ì—…ë°ì´íŠ¸ â†’ ë‚ ì§œë³„ í´ë” ìœ ì§€
2. âœ… **ì „ë…„/ê³„íš ë°ì´í„°**: ì›”ë³„ë¡œ ì—…ë°ì´íŠ¸ â†’ `previous/`, `plan/` í´ë”ì— ì›”ë³„ ì €ì¥
3. âœ… **ê¸°ì¡´ ì½”ë“œ í˜¸í™˜**: ë‹¹ë…„ ë°ì´í„° ê²½ë¡œ ë³€ê²½ ìµœì†Œí™”
4. âœ… **ëª…í™•í•œ êµ¬ì¡°**: ë°ì´í„° íƒ€ì…ë³„ë¡œ êµ¬ë¶„ì´ ëª…í™•

---

## ğŸ“ êµ¬í˜„ ì˜ˆì‹œ

### Python ìŠ¤í¬ë¦½íŠ¸ì—ì„œ ë°ì´í„° ë¡œë“œ

```python
import os
from datetime import datetime

def get_current_year_data(date_str: str):
    """
    ë‹¹ë…„ ë°ì´í„° ë¡œë“œ (ì£¼ì°¨ë³„)
    date_str: YYYYMMDD í˜•ì‹
    """
    date_folder = os.path.join(RAW_DIR, date_str)
    file_path = os.path.join(date_folder, f"ke30_{date_str}_{date_str[:6]}_ì „ì²˜ë¦¬ì™„ë£Œ.csv")
    return file_path

def get_previous_year_data(year_month: str):
    """
    ì „ë…„ ë°ì´í„° ë¡œë“œ (ì›”ë³„)
    year_month: YYYYMM í˜•ì‹ (ì˜ˆ: "202411")
    """
    month_folder = os.path.join(RAW_DIR, "previous", year_month)
    file_path = os.path.join(month_folder, f"ke30_prev_{year_month}_ì „ì²˜ë¦¬ì™„ë£Œ.csv")
    return file_path

def get_plan_data(year_month: str):
    """
    ê³„íš ë°ì´í„° ë¡œë“œ (ì›”ë³„)
    year_month: YYYYMM í˜•ì‹ (ì˜ˆ: "202511")
    """
    month_folder = os.path.join(RAW_DIR, "plan", year_month)
    file_path = os.path.join(month_folder, f"plan_{year_month}_ì „ì²˜ë¦¬ì™„ë£Œ.csv")
    return file_path

# ì‚¬ìš© ì˜ˆì‹œ
current_date = "20251117"  # YYYYMMDD
current_month = current_date[:6]  # "202511"
prev_year_month = f"2024{current_date[4:6]}"  # "202411"

current_path = get_current_year_data(current_date)
previous_path = get_previous_year_data(prev_year_month)
plan_path = get_plan_data(current_month)
```

---

## ğŸ”§ ìŠ¤í¬ë¦½íŠ¸ ìˆ˜ì • ì˜ˆì‹œ

### ì „ë…„ ë°ì´í„° ì „ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸
```python
# scripts/process_ke30_previous_year.py

def main():
    # ì…ë ¥: C:\ke30\ke30_prev_202411.xlsx (ì›”ë³„ íŒŒì¼)
    excel_path = find_previous_year_file()  # ì›”ë³„ íŒŒì¼ ì°¾ê¸°
    
    # ì¶œë ¥: raw/previous/202411/ke30_prev_202411_ì „ì²˜ë¦¬ì™„ë£Œ.csv
    year_month = extract_year_month(excel_path)  # "202411"
    output_dir = os.path.join(RAW_DIR, "previous", year_month)
    os.makedirs(output_dir, exist_ok=True)
    
    output_path = os.path.join(output_dir, f"ke30_prev_{year_month}_ì „ì²˜ë¦¬ì™„ë£Œ.csv")
    # ... ì „ì²˜ë¦¬ ë¡œì§ ...
```

### ê³„íš ë°ì´í„° ì „ì²˜ë¦¬ ìŠ¤í¬ë¦½íŠ¸
```python
# scripts/process_plan_data.py

def main():
    # ì…ë ¥: raw/202511R_*.csv (ì›”ë³„ íŒŒì¼ë“¤)
    plan_files = find_plan_files()  # 202511R_*.csv íŒŒì¼ë“¤
    
    # ì¶œë ¥: raw/plan/202511/plan_202511_ì „ì²˜ë¦¬ì™„ë£Œ.csv
    year_month = "202511"  # ë˜ëŠ” íŒŒì¼ëª…ì—ì„œ ì¶”ì¶œ
    output_dir = os.path.join(RAW_DIR, "plan", year_month)
    os.makedirs(output_dir, exist_ok=True)
    
    output_path = os.path.join(output_dir, f"plan_{year_month}_ì „ì²˜ë¦¬ì™„ë£Œ.csv")
    # ... ì „ì²˜ë¦¬ ë¡œì§ ...
```

---

## ğŸ“‹ ë°ì´í„° ë¡œë“œ ë¡œì§

### ì„¹ì…˜ë³„ ë°ì´í„° ìƒì„± ì‹œ
```python
# scripts/create_overview_data.py

def create_overview_data(current_date: str):
    """
    ì „ì²´ í˜„í™© ë°ì´í„° ìƒì„±
    """
    # ë‹¹ë…„ ë°ì´í„° (ì£¼ì°¨ë³„)
    current_path = get_current_year_data(current_date)
    df_current = pd.read_csv(current_path)
    
    # ì „ë…„ ë°ì´í„° (ì›”ë³„)
    current_month = current_date[:6]  # "202511"
    prev_year_month = f"2024{current_date[4:6]}"  # "202411"
    previous_path = get_previous_year_data(prev_year_month)
    df_previous = pd.read_csv(previous_path)
    
    # ê³„íš ë°ì´í„° (ì›”ë³„)
    plan_path = get_plan_data(current_month)
    df_plan = pd.read_csv(plan_path)
    
    # ë°ì´í„° ì§‘ê³„ ë° ë¹„êµ
    # ...
```

---

## ğŸ¯ ìµœì¢… ê¶Œì¥ êµ¬ì¡° ìš”ì•½

```
raw/
â”œâ”€â”€ YYYYMMDD/                    # ë‹¹ë…„ (ì£¼ì°¨ë³„)
â”‚   â””â”€â”€ ke30_*_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â”œâ”€â”€ previous/YYYYMM/             # ì „ë…„ (ì›”ë³„)
â”‚   â””â”€â”€ ke30_prev_*_ì „ì²˜ë¦¬ì™„ë£Œ.csv
â”‚
â””â”€â”€ plan/YYYYMM/                  # ê³„íš (ì›”ë³„)
    â””â”€â”€ plan_*_ì „ì²˜ë¦¬ì™„ë£Œ.csv
```

**ì¥ì :**
- âœ… ë‹¹ë…„ ë°ì´í„°ëŠ” ì£¼ì°¨ë³„ë¡œ ëª…í™•íˆ êµ¬ë¶„
- âœ… ì „ë…„/ê³„íš ë°ì´í„°ëŠ” ì›”ë³„ë¡œ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬
- âœ… ë°ì´í„° íƒ€ì…ë³„ë¡œ êµ¬ì¡°ê°€ ëª…í™•
- âœ… ê¸°ì¡´ ì½”ë“œ ìˆ˜ì • ìµœì†Œí™”



