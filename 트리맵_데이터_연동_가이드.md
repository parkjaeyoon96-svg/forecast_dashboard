M# íŠ¸ë¦¬ë§µ ë°ì´í„° ì—°ë™ ê°€ì´ë“œ

## ğŸ“‹ ê°œìš”

ì „ì²˜ë¦¬ ì™„ë£Œëœ KE30 ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ì±„ë„ë³„, ì•„ì´í…œë³„ íŠ¸ë¦¬ë§µ ë°ì´í„°**ë¥¼ ìƒì„±í•˜ê³  ëŒ€ì‹œë³´ë“œì— ì—°ë™í•˜ëŠ” ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ”„ ë°ì´í„° ì²˜ë¦¬ íë¦„

### 1ï¸âƒ£ ë°ì´í„° ì§‘ê³„

**ì§‘ê³„ ê¸°ì¤€:**
- **í–‰**: ë¸Œëœë“œ, ì±„ë„ëª…, ì•„ì´í…œ_ì¤‘ë¶„ë¥˜
- **ê°’**: í•©ê³„ : ì‹¤íŒë§¤ì•¡

**ì˜ˆì‹œ:**
| ë¸Œëœë“œ | ì±„ë„ëª… | ì•„ì´í…œ_ì¤‘ë¶„ë¥˜ | ì‹¤íŒë§¤ì•¡ |
|-------|--------|-------------|---------|
| I | ë°±í™”ì  | Headwear | 92,804,140 |
| I | ë°±í™”ì  | ê³¼ì‹œì¦Œì˜ë¥˜ | 56,917,490 |
| I | ë°±í™”ì  | ë‹¹ì‹œì¦Œì˜ë¥˜ | 908,506,230 |

### 2ï¸âƒ£ JSON êµ¬ì¡° ìƒì„±

```javascript
{
  "I": {  // MLB KIDS
    "ë°±í™”ì ": {
      "Headwear": 92804140,
      "ê³¼ì‹œì¦Œì˜ë¥˜": 56917490,
      "ë‹¹ì‹œì¦Œì˜ë¥˜": 908506230,
      "Shoes": 194344190,
      "Bag": 33312910,
      "Acc_etc": 9271390
    },
    "ëŒ€ë¦¬ì ": {
      "Headwear": 28460660,
      "ê³¼ì‹œì¦Œì˜ë¥˜": 511000,
      ...
    }
  },
  "M": {  // MLB
    ...
  }
}
```

---

## ğŸš€ ì‹¤í–‰ ë°©ë²•

### ë°©ë²• 1: ë°°ì¹˜ íŒŒì¼ ì‹¤í–‰ (ê¶Œì¥)
```
íŠ¸ë¦¬ë§µë°ì´í„°_ìƒì„±.bat ë”ë¸”í´ë¦­
```

### ë°©ë²• 2: ëª…ë ¹ í”„ë¡¬í”„íŠ¸
```cmd
cd C:\Users\AD0283\Desktop\AIproject\Project_Forcast
python scripts\create_treemap_data.py
```

---

## ğŸ“ ìƒì„± íŒŒì¼

### ì¶œë ¥ íŒŒì¼
```
public/treemap_data.js
```

### íŒŒì¼ êµ¬ì¡°
```javascript
// ë¸Œëœë“œ ë§¤í•‘
const brandNames = {
    'I': 'MLB KIDS',
    'M': 'MLB',
    'X': 'REEBOK CLASSIC',
    'V': 'NBA',
    'ST': 'STARTER',
    'W': 'WITHMUU'
};

// ì±„ë„ë³„, ì•„ì´í…œë³„ ë§¤ì¶œ ë°ì´í„°
const channelItemSalesData = {
    // ... ë°ì´í„°
};

// ë¸Œë¼ìš°ì € í™˜ê²½
window.channelItemSalesData = channelItemSalesData;
window.brandNames = brandNames;
```

---

## ğŸ”— ëŒ€ì‹œë³´ë“œ ì—°ë™

### 1. HTMLì— ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€

`public/Dashboard.html` íŒŒì¼ì— ë‹¤ìŒ ì½”ë“œë¥¼ ì¶”ê°€:

```html
<head>
    <!-- ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ë“¤ -->
    
    <!-- íŠ¸ë¦¬ë§µ ë°ì´í„° -->
    <script src="./treemap_data.js"></script>
</head>
```

### 2. íŠ¸ë¦¬ë§µ ì´ˆê¸°í™”

```javascript
// ë¸Œëœë“œ ì„ íƒ ì‹œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
function loadBrandData(brandCode) {
    // ë¸Œëœë“œëª… ê°€ì ¸ì˜¤ê¸°
    const brandName = window.brandNames[brandCode];
    
    // í•´ë‹¹ ë¸Œëœë“œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
    const brandData = window.channelItemSalesData[brandCode];
    
    if (!brandData) {
        console.error('ë¸Œëœë“œ ë°ì´í„° ì—†ìŒ:', brandCode);
        return;
    }
    
    // ì±„ë„ë³„ íŠ¸ë¦¬ë§µ ìƒì„±
    createChannelTreemap(brandData);
    
    // ì•„ì´í…œë³„ íŠ¸ë¦¬ë§µ ìƒì„±
    createItemTreemap(brandData);
}
```

### 3. ì±„ë„ë³„ íŠ¸ë¦¬ë§µ ìƒì„±

```javascript
function createChannelTreemap(brandData) {
    // ì±„ë„ë³„ ë§¤ì¶œ í•©ê³„ ê³„ì‚°
    const channelSales = {};
    for (const [channel, items] of Object.entries(brandData)) {
        channelSales[channel] = Object.values(items).reduce((a, b) => a + b, 0);
    }
    
    // Plotly íŠ¸ë¦¬ë§µ ë°ì´í„°
    const labels = Object.keys(channelSales);
    const parents = Array(labels.length).fill('');
    const values = Object.values(channelSales);
    
    const data = [{
        type: 'treemap',
        labels: labels,
        parents: parents,
        values: values,
        textinfo: 'label+value+percent parent',
        hovertemplate: '<b>%{label}</b><br>ë§¤ì¶œ: %{value:,.0f}ì›<br>ë¹„ìœ¨: %{percentParent}<extra></extra>'
    }];
    
    const layout = {
        title: 'ì±„ë„ë³„ ë§¤ì¶œ êµ¬ì„±',
        margin: {t: 50, l: 0, r: 0, b: 0}
    };
    
    Plotly.newPlot('channelTreemapDiv', data, layout);
}
```

### 4. ë“œë¦´ë‹¤ìš´ ê¸°ëŠ¥ ì¶”ê°€

```javascript
function createChannelTreemapWithDrilldown(brandData) {
    // ì „ì²´ ë°ì´í„° êµ¬ì¡° ìƒì„±
    const labels = ['ì „ì²´'];
    const parents = [''];
    const values = [0];
    const ids = ['root'];
    
    // ì±„ë„ ë ˆë²¨
    for (const [channel, items] of Object.entries(brandData)) {
        const channelTotal = Object.values(items).reduce((a, b) => a + b, 0);
        
        labels.push(channel);
        parents.push('ì „ì²´');
        values.push(channelTotal);
        ids.push(`channel_${channel}`);
        
        // ì•„ì´í…œ ë ˆë²¨ (ë“œë¦´ë‹¤ìš´)
        for (const [item, sales] of Object.entries(items)) {
            labels.push(item);
            parents.push(channel);
            values.push(sales);
            ids.push(`${channel}_${item}`);
        }
    }
    
    const data = [{
        type: 'treemap',
        labels: labels,
        parents: parents,
        values: values,
        ids: ids,
        branchvalues: 'total',
        textinfo: 'label+value+percent parent',
        hovertemplate: '<b>%{label}</b><br>ë§¤ì¶œ: %{value:,.0f}ì›<br>ë¹„ìœ¨: %{percentParent}<extra></extra>'
    }];
    
    const layout = {
        title: 'ì±„ë„ë³„ ë§¤ì¶œ êµ¬ì„± (í´ë¦­í•˜ì—¬ ë“œë¦´ë‹¤ìš´)',
        margin: {t: 50, l: 0, r: 0, b: 0}
    };
    
    Plotly.newPlot('treemapDiv', data, layout);
}
```

### 5. ì•„ì´í…œë³„ íŠ¸ë¦¬ë§µ ìƒì„±

```javascript
function createItemTreemap(brandData) {
    // ì•„ì´í…œë³„ ë§¤ì¶œ í•©ê³„ ê³„ì‚°
    const itemSales = {};
    for (const items of Object.values(brandData)) {
        for (const [item, sales] of Object.entries(items)) {
            itemSales[item] = (itemSales[item] || 0) + sales;
        }
    }
    
    // Plotly íŠ¸ë¦¬ë§µ ë°ì´í„°
    const labels = Object.keys(itemSales);
    const parents = Array(labels.length).fill('');
    const values = Object.values(itemSales);
    
    const data = [{
        type: 'treemap',
        labels: labels,
        parents: parents,
        values: values,
        textinfo: 'label+value+percent parent',
        hovertemplate: '<b>%{label}</b><br>ë§¤ì¶œ: %{value:,.0f}ì›<br>ë¹„ìœ¨: %{percentParent}<extra></extra>'
    }];
    
    const layout = {
        title: 'ì•„ì´í…œë³„ ë§¤ì¶œ êµ¬ì„±',
        margin: {t: 50, l: 0, r: 0, b: 0}
    };
    
    Plotly.newPlot('itemTreemapDiv', data, layout);
}
```

---

## ğŸ“Š ë°ì´í„° í†µê³„ (ì˜ˆì‹œ)

### ë¸Œëœë“œë³„ ì´ ë§¤ì¶œ

| ë¸Œëœë“œ | ë¸Œëœë“œëª… | ì´ ë§¤ì¶œ |
|-------|---------|---------|
| X | REEBOK CLASSIC | 28,085,669,084ì› |
| M | MLB | 25,937,334,630ì› |
| I | MLB KIDS | 4,557,986,654ì› |
| V | NBA | 2,470,338,880ì› |
| ST | STARTER | 377,925,160ì› |
| W | WITHMUU | 110,376,059ì› |

### I (MLB KIDS) ì£¼ìš” ì±„ë„

| ì±„ë„ | ë§¤ì¶œ | ë¹„ìœ¨ |
|------|------|------|
| ë°±í™”ì  | 1,295,156,350ì› | 28.4% |
| ì‚¬ì… | 1,114,034,370ì› | 24.4% |
| ì œíœ´ëª° | 645,350,070ì› | 14.2% |
| ëŒ€ë¦¬ì  | 412,323,550ì› | 9.0% |
| ìˆ˜ì¶œ | 359,362,834ì› | 7.9% |

---

## ğŸ¯ ì‚¬ìš© ì˜ˆì‹œ

### 1. ë¸Œëœë“œ ì„ íƒ ì‹œ
```javascript
// ì‚¬ìš©ìê°€ "MLB KIDS" ë¸Œëœë“œë¥¼ í´ë¦­í–ˆì„ ë•Œ
const brandCode = 'I';
loadBrandData(brandCode);
```

### 2. ë°ì´í„° ì¡°íšŒ
```javascript
// MLB KIDSì˜ ë°±í™”ì  ë°ì´í„° ì¡°íšŒ
const mlbKidsData = window.channelItemSalesData['I'];
const departmentData = mlbKidsData['ë°±í™”ì '];

console.log('ë°±í™”ì  Headwear ë§¤ì¶œ:', departmentData['Headwear']);
// ì¶œë ¥: 92804140
```

### 3. ì±„ë„ ì´ ë§¤ì¶œ ê³„ì‚°
```javascript
function getChannelTotal(brandCode, channelName) {
    const channelData = window.channelItemSalesData[brandCode][channelName];
    return Object.values(channelData).reduce((sum, val) => sum + val, 0);
}

// ì‚¬ìš©
const total = getChannelTotal('I', 'ë°±í™”ì ');
console.log('ë°±í™”ì  ì´ ë§¤ì¶œ:', total.toLocaleString() + 'ì›');
```

---

## ğŸ”§ ë¬¸ì œ í•´ê²°

### ë¬¸ì œ 1: "channelItemSalesData is not defined"
**ì›ì¸:** ìŠ¤í¬ë¦½íŠ¸ê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
1. `treemap_data.js` íŒŒì¼ì´ `public/` í´ë”ì— ìˆëŠ”ì§€ í™•ì¸
2. HTMLì—ì„œ ìŠ¤í¬ë¦½íŠ¸ íƒœê·¸ê°€ ì˜¬ë°”ë¥¸ì§€ í™•ì¸
```html
<script src="./treemap_data.js"></script>
```

### ë¬¸ì œ 2: "ë°ì´í„°ê°€ í‘œì‹œë˜ì§€ ì•ŠìŒ"
**ì›ì¸:** ë¸Œëœë“œ ì½”ë“œ ë¶ˆì¼ì¹˜

**í•´ê²°:**
ë¸Œëœë“œ ì½”ë“œ í™•ì¸:
```javascript
console.log(Object.keys(window.channelItemSalesData));
// ['I', 'M', 'X', 'V', 'ST', 'W']
```

### ë¬¸ì œ 3: "íŠ¸ë¦¬ë§µì´ ê¹¨ì§"
**ì›ì¸:** Plotly.jsê°€ ë¡œë“œë˜ì§€ ì•ŠìŒ

**í•´ê²°:**
Plotly.js CDN ì¶”ê°€:
```html
<script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
```

---

## ğŸ“ ë°ì´í„° ì—…ë°ì´íŠ¸

### ìƒˆë¡œìš´ KE30 ë°ì´í„° ë°˜ì˜

1. **KE30 ì „ì²˜ë¦¬ ì‹¤í–‰**
```cmd
ë‹¹ë…„ë°ì´í„°_ì²˜ë¦¬ì‹¤í–‰.bat
```

2. **íŠ¸ë¦¬ë§µ ë°ì´í„° ìƒì„±**
```cmd
íŠ¸ë¦¬ë§µë°ì´í„°_ìƒì„±.bat
```

3. **ëŒ€ì‹œë³´ë“œ ìƒˆë¡œê³ ì¹¨**
- ë¸Œë¼ìš°ì €ì—ì„œ Ctrl+F5 (ê°•ì œ ìƒˆë¡œê³ ì¹¨)

---

## ğŸ¨ ì»¤ìŠ¤í„°ë§ˆì´ì§•

### ìƒ‰ìƒ í…Œë§ˆ ë³€ê²½

```javascript
const data = [{
    type: 'treemap',
    labels: labels,
    parents: parents,
    values: values,
    marker: {
        colors: values,
        colorscale: 'Blues',  // 'Viridis', 'Portland', 'Jet' ë“±
        showscale: true
    }
}];
```

### í…ìŠ¤íŠ¸ í¬ë§· ë³€ê²½

```javascript
textinfo: 'label+value',  // ë¼ë²¨ê³¼ ê°’ë§Œ
textinfo: 'label+percent parent',  // ë¼ë²¨ê³¼ ë¹„ìœ¨ë§Œ
textinfo: 'label+value+percent parent',  // ëª¨ë‘ í‘œì‹œ
```

---

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´:
1. ì½˜ì†” ë¡œê·¸ í™•ì¸ (F12 â†’ Console)
2. `treemap_data.js` íŒŒì¼ í™•ì¸
3. ë¸Œëœë“œ ì½”ë“œ í™•ì¸

---

**ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸:** 2025-11-16




